function _classCallCheck(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function _defineProperties(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function _createClass(t,e,i){return e&&_defineProperties(t.prototype,e),i&&_defineProperties(t,i),t}(window.webpackJsonp=window.webpackJsonp||[]).push([[15],{Q59R:function(t,e,i){"use strict";i.r(e);var n,o,s=i("1kSV"),c=i("ofXK"),r=i("3Pt+"),a=i("tyNb"),l=i("mrSG"),d=i("Usal"),u=i("pdjO"),b=i("fXoL"),h=i("II9H"),p=i("nD3/"),f=i("1pjZ"),g=((n=function(){function t(e,i){_classCallCheck(this,t),this.coreService=e,this.config=i;var n=i.getConfig("host");this.apiOptions={load:n+"api/wiki/load",getinfo:n+"api/wiki/getinfo",action:n+"api/wiki/action",proc:n+"api/wiki/proc"},this.init_toolbar_options(),this.init_search_options()}return _createClass(t,[{key:"init_search_options",value:function(){this.searchOptions={showpanel:!0,showSearchPanel:!0,showAdvanceSearchLink:!1,term:"",topselectioncheck:!0,navList:[],filters:[],dropdownFilters:[],checkFilters:[],categories:[],selectedcategory:"",singleaction:!1,actions:this.navActions()}}},{key:"navActions",value:function(){return[{id:1,title:"Create Wiki",tooltip:"Create new Wiki",row:1,icon:"icon-file-plus",options:{},css:"btn m-b-5 btn-block btn-success",event:"add"}]}},{key:"init_search_profile_options",value:function(){return{showpanel:!0,showSearchPanel:!1,term:"",topselectioncheck:!1,navList:this.navList(),filters:[],dropdownFilters:[],categories:[],selectedcategory:"",singleaction:!1,actions:this.navActions()}}},{key:"navList",value:function(){return[{id:1,title:"Edit",clickevent:!0,event:"edit",css:"",url:"",icon:""},{id:2,title:"Delete",clickevent:!0,event:"delete",css:"",url:"",icon:""}]}},{key:"getSearchOptionsProfile",value:function(){return this.init_search_profile_options()}},{key:"init_toolbar_options",value:function(){this.toolbarOptions={showtoolbar:!0,showsecondarytoolbar:!0,showcheckAll:!1,navbarcss:h.d.NAVBAR_CSS,left_options:[],left_caption:"",right_caption:"",right_options:[],actions:[]},this.toolbarOptions.right_options.push({title:"Order",ismultiple:!0,position:"right",icon:"icon-sort-by-order-alt position-left",Options:[{id:"0",title:"Date",value:"id",isclick:!0,clickevent:"orderby",tooltip:"Order by Date"},{id:"1",title:"Term",value:"term",isclick:!0,clickevent:"orderby",tooltip:"Order by Term"}]}),this.toolbarOptions.actions.push({title:"Mark As",ismultiple:!0,icon:"",Options:[{id:"2",title:"Delete",value:0,actionstatus:"delete",css:h.b.DANGER_BUTTON,attr:"",isclick:!0,clickevent:"m_markas",icon:h.c.DELETE_ICON,tooltip:"Delete selected records"}]})}},{key:"getApiOptions",value:function(){return this.apiOptions}},{key:"getUploadOptions",value:function(){return this.uploadOptions}},{key:"getToolbarOptions",value:function(){return this.toolbarOptions}},{key:"getSearchOptions",value:function(){return this.searchOptions}},{key:"getInitObject",value:function(){return{id:0,term:"",term_complete:"",description:"",tags:"",replyid:0,userid:0}}}]),t}()).\u0275fac=function(t){return new(t||n)(b.ac(p.a),b.ac(f.a))},n.\u0275prov=b.Ib({token:n,factory:n.\u0275fac}),n),v=i("tk/3"),m=i("kP+A"),y=i("LEd3"),S=((o=function(){function t(e,i,n,o){_classCallCheck(this,t),this.settings=e,this.http=i,this.actions=n,this.coreActions=o}return _createClass(t,[{key:"LoadRecords",value:function(t){var e=this,i=this.settings.getApiOptions().load;this.actions.loadStarted(),this.http.post(i,JSON.stringify(t)).subscribe((function(i){e.actions.loadSucceeded(i),e.coreActions.refreshListStats({totalrecords:i.records,pagesize:t.pagesize,pagenumber:t.pagenumber})}),(function(t){e.actions.loadFailed(t)}))}},{key:"GetInfo",value:function(t){var e=this.settings.getApiOptions().getinfo;return this.http.post(e,JSON.stringify({id:t}))}},{key:"GetDetailInfo",value:function(t){var e=this.settings.getApiOptions().getinfo;return this.http.post(e,JSON.stringify({id:t,detailview:!0}))}},{key:"AddRecord",value:function(t){return this.http.post(this.settings.getApiOptions().proc,JSON.stringify(t))}},{key:"DeleteRecord",value:function(t,e){t.actionstatus="delete";var i=[];i.push(t),this.ProcessActions(i,"delete")}},{key:"ProcessActions",value:function(t,e){var i=this;this.actions.applyChanges({SelectedItems:t,isenabled:e}),this.http.post(this.settings.getApiOptions().action,JSON.stringify(t)).subscribe((function(t){var n="Operation Performed";"delete"===e&&(n="Record Removed"),i.coreActions.Notify({title:n,text:"",css:"bg-success"})}),(function(t){i.coreActions.Notify({title:"Error Occured",text:"",css:"bg-danger"})}))}}]),t}()).\u0275fac=function(t){return new(t||o)(b.ac(g),b.ac(v.b),b.ac(m.a),b.ac(y.a))},o.\u0275prov=b.Ib({token:o,factory:o.\u0275fac}),o),k=i("Hjmt"),R=i("/H0e"),I=i("4HLj"),w=i("R0Ic"),O=i("QxdJ"),A=i("cScK"),_=i("RDfn"),C=i("aIzJ");function D(t,e){1&t&&b.Nb(0,"app-loader")}function G(t,e){if(1&t){var i=b.Tb();b.Sb(0,"tr",9),b.Sb(1,"td",10),b.Sb(2,"div",5),b.Sb(3,"input",11),b.ec("ngModelChange",(function(t){return b.xc(i),e.$implicit.Selected=t}))("ngModelChange",(function(){return b.xc(i),b.gc(3).checkChange()})),b.Rb(),b.Nb(4,"label",12),b.Rb(),b.Rb(),b.Sb(5,"td"),b.Sb(6,"a",13),b.ec("click",(function(t){b.xc(i);var n=e.$implicit;return b.gc(3).viewRecord(n,t),!1})),b.Gc(7),b.Rb(),b.Rb(),b.Sb(8,"td"),b.Gc(9),b.Rb(),b.Sb(10,"td",14),b.Sb(11,"a",15),b.ec("click",(function(t){b.xc(i);var n=e.$implicit;return b.gc(3).editRecord(n,t),!1})),b.Nb(12,"i",16),b.Rb(),b.Sb(13,"a",17),b.ec("click",(function(t){b.xc(i);var n=e.$implicit,o=e.index;return b.gc(3).delete(n,o,t),!1})),b.Nb(14,"i",18),b.Rb(),b.Rb(),b.Rb()}if(2&t){var n=e.$implicit;b.nc("@fadeIn",void 0)("hidden",n.isdeleted),b.zb(3),b.oc("id",n.id),b.nc("ngModel",n.Selected),b.zb(1),b.oc("for",n.id),b.zb(3),b.Hc(n.term),b.zb(2),b.Ic(" ",n.term_complete," ")}}function x(t,e){if(1&t){var i=b.Tb();b.Sb(0,"div"),b.Sb(1,"div",3),b.Sb(2,"table",4),b.Sb(3,"thead"),b.Sb(4,"tr"),b.Sb(5,"th"),b.Sb(6,"div",5),b.Sb(7,"input",6),b.ec("ngModelChange",(function(t){return b.xc(i),b.gc(2).selectall=t}))("ngModelChange",(function(){return b.xc(i),b.gc(2).processChange()})),b.Rb(),b.Nb(8,"label",7),b.Rb(),b.Rb(),b.Sb(9,"th"),b.Gc(10,"Topic"),b.Rb(),b.Sb(11,"th"),b.Gc(12,"Detail Topic"),b.Rb(),b.Sb(13,"th"),b.Gc(14,"--"),b.Rb(),b.Rb(),b.Rb(),b.Sb(15,"tbody"),b.Ec(16,G,15,7,"tr",8),b.hc(17,"async"),b.Rb(),b.Rb(),b.Rb(),b.Rb()}if(2&t){var n=b.gc(2);b.zb(7),b.nc("ngModel",n.selectall),b.zb(9),b.nc("ngForOf",b.ic(17,3,n.Data$))("ngForTrackBy",n.getKey)}}function M(t,e){1&t&&b.Nb(0,"app-norecord")}function z(t,e){if(1&t&&(b.Sb(0,"div"),b.Ec(1,x,18,5,"div",0),b.hc(2,"async"),b.Ec(3,M,1,0,"app-norecord",0),b.hc(4,"async"),b.Rb()),2&t){var i=b.gc();b.zb(1),b.nc("ngIf",b.ic(2,2,i.Data$).length>0),b.zb(2),b.nc("ngIf",0===b.ic(4,4,i.Data$).length)}}var N,L=((N=function(){function t(e,i,n,o){_classCallCheck(this,t),this.actions=e,this.coreActions=i,this.dataService=n,this.router=o,this.isActionGranded=!1,this.View=new b.n,this.SelectedItems=new b.n,this.selectall=!1}return _createClass(t,[{key:"ngOnInit",value:function(){var t=this;this.selectAll$.subscribe((function(e){t.selectall=e,t.checkChange()}))}},{key:"viewRecord",value:function(t,e){this.router.navigate(["/wiki/profile/"+t.id]),e.stopPropagation()}},{key:"editRecord",value:function(t,e){this.router.navigate(["/wiki/process/"+t.id]),e.stopPropagation()}},{key:"getKey",value:function(t,e){return e.id}},{key:"delete",value:function(t,e,i){this.isActionGranded?!0===confirm("Are you sure you want to delete selected record?")&&this.dataService.DeleteRecord(t,e):this.coreActions.Notify({title:"Permission Denied",text:"",css:"bg-danger"})}},{key:"PaginationChange",value:function(t){this.actions.applyFilter({attr:"pagenumber",value:t}),this.actions.updatePaginationCurrentPage({currentpage:t})}},{key:"processChange",value:function(){this.actions.selectAll(this.selectall)}},{key:"checkChange",value:function(){var t=this;this.Data$.subscribe((function(e){var i=[],n=!0,o=!1,s=void 0;try{for(var c,r=e[Symbol.iterator]();!(n=(c=r.next()).done);n=!0){var a=c.value;a.Selected&&i.push(a)}}catch(l){o=!0,s=l}finally{try{n||null==r.return||r.return()}finally{if(o)throw s}}t.SelectedItems.emit(i)}))}}]),t}()).\u0275fac=function(t){return new(t||N)(b.Mb(m.a),b.Mb(y.a),b.Mb(S),b.Mb(a.c))},N.\u0275cmp=b.Gb({type:N,selectors:[["app-list"]],inputs:{isActionGranded:"isActionGranded"},outputs:{View:"View",SelectedItems:"SelectedItems"},decls:10,vars:15,consts:[[4,"ngIf"],[1,"text-center","content-group-lg","pt-20"],[3,"currentPage","totalRecords","pageSize","OnSelection"],[1,"table-responsive"],[1,"table","table-bordered","table-hover","table-striped","no-wrap"],[1,"checkbox"],["id","selectall","type","checkbox",3,"ngModel","ngModelChange"],["for","selectall",1,"p-b-0","p-t-0"],[3,"hidden",4,"ngFor","ngForOf","ngForTrackBy"],[3,"hidden"],[2,"width","5%"],["type","checkbox",3,"ngModel","id","ngModelChange"],[3,"for"],["href","",1,"text-bigger",3,"click"],[1,"text-nowrap"],["href","#","data-toggle","tooltip","data-original-title","Edit",3,"click"],[1,"fa","fa-pencil","text-inverse","m-r-10"],["href","#","data-toggle","tooltip","data-original-title","Close",3,"click"],[1,"fa","fa-close","text-danger"]],template:function(t,e){1&t&&(b.Nb(0,"alert"),b.Ec(1,D,1,0,"app-loader",0),b.hc(2,"async"),b.Ec(3,z,5,6,"div",0),b.hc(4,"async"),b.Sb(5,"div",1),b.Sb(6,"pagination",2),b.ec("OnSelection",(function(t){return e.PaginationChange(t)})),b.hc(7,"async"),b.hc(8,"async"),b.hc(9,"async"),b.Rb(),b.Rb()),2&t&&(b.zb(1),b.nc("ngIf",b.ic(2,5,e.loading$)),b.zb(2),b.nc("ngIf",!b.ic(4,7,e.loading$)),b.zb(3),b.nc("currentPage",b.ic(7,9,e.pagination$).currentPage)("totalRecords",b.ic(8,11,e.pagination$).totalRecords)("pageSize",b.ic(9,13,e.pagination$).pageSize))},directives:[O.a,c.n,A.a,_.a,r.a,r.n,r.q,c.m,C.a],pipes:[c.b],encapsulation:2,data:{animation:[Object(w.k)("fadeIn",[Object(w.j)(":enter",[Object(w.i)({opacity:"0",background:"#f5fb98"}),Object(w.e)("300ms ease-out",Object(w.f)([Object(w.i)({opacity:0,transform:"translateY(-75%)",offset:0}),Object(w.i)({opacity:.5,transform:"translateY(35px)",offset:.5}),Object(w.i)({opacity:1,transform:"translateY(0)",offset:1})]))])])]}}),Object(l.a)([Object(d.e)(["wiki","posts"])],N.prototype,"Data$",void 0),Object(l.a)([Object(d.e)(["wiki","loading"])],N.prototype,"loading$",void 0),Object(l.a)([Object(d.e)(["wiki","pagination"])],N.prototype,"pagination$",void 0),Object(l.a)([Object(d.e)(["wiki","selectall"])],N.prototype,"selectAll$",void 0),N);function j(t,e){1&t&&(b.Sb(0,"div"),b.Sb(1,"h2",2),b.Gc(2,"Access Denied"),b.Rb(),b.Rb())}function F(t,e){if(1&t){var i=b.Tb();b.Sb(0,"div"),b.Sb(1,"div",3),b.Sb(2,"div",4),b.Sb(3,"app-navigation-v2",5),b.ec("Action",(function(t){return b.xc(i),b.gc().toolbaraction(t)}))("SearchSelection",(function(t){return b.xc(i),b.gc().FindRecords(t)})),b.Rb(),b.Rb(),b.Sb(4,"div",6),b.Sb(5,"app-toolbar-v2",7),b.ec("Action",(function(t){return b.xc(i),b.gc().toolbaraction(t)}))("SelectAllCard",(function(t){return b.xc(i),b.gc().selectAll(t)})),b.Rb(),b.Sb(6,"div",8),b.Sb(7,"app-list",9),b.ec("View",(function(t){return b.xc(i),b.gc().toolbaraction(t)}))("SelectedItems",(function(t){return b.xc(i),b.gc().getSelectedItems(t)})),b.Rb(),b.Rb(),b.Rb(),b.Rb(),b.Rb()}if(2&t){var n=b.gc();b.zb(3),b.nc("FilterOptions",n.FilterOptions)("Options",n.SearchOptions),b.zb(2),b.nc("Options",n.ToolbarOptions)("isItemsSelected",n.isItemsSelected),b.zb(2),b.nc("isActionGranded",n.isActionGranded)}}var P,T,$,E=((P=function(){function t(e,i,n,o,s,c,r,a){_classCallCheck(this,t),this.settingService=e,this.dataService=i,this.coreService=n,this.coreActions=o,this.permission=s,this.actions=c,this.router=r,this.route=a,this.isAccessGranted=!1,this.isActionGranded=!1,this.heading="Wiki",this.subheading="Management",this.isItemsSelected=!1,this.Records=0,this.Pagination={}}return _createClass(t,[{key:"ngOnInit",value:function(){var t=this;this.auth$.subscribe((function(e){t.permission.GrandResourceAccess(!1,"1521396235692","1521396214790",e.Role)&&(t.isAccessGranted=!0,t.permission.GrandResourceAction("1521396235692",e.Role)&&(t.isActionGranded=!0))})),this.SearchOptions=this.settingService.getSearchOptions(),this.ToolbarOptions=this.settingService.getToolbarOptions(),this.filteroptions$.subscribe((function(e){t.FilterOptions=e,e.track_filter&&(t.dataService.LoadRecords(e),e.track_filter=!1,t.actions.updateFilterOptions(e))})),this.isloaded$.subscribe((function(e){e?t.refreshStats():t.dataService.LoadRecords(t.FilterOptions)})),this.isItemSelected$.subscribe((function(e){t.isItemsSelected=e})),this.records$.subscribe((function(e){t.Records=e})),this.pagination$.subscribe((function(e){t.Pagination=e})),this.route.params.subscribe((function(e){void 0!==e.tagname&&(console.log("tag filter initiated"),t.FilterOptions.tags=e.tagname,t.FilterOptions.track_filter=!0,t.actions.updateFilterOptions(t.FilterOptions))}))}},{key:"selectAll",value:function(t){this.actions.selectAll(t)}},{key:"toolbaraction",value:function(t){switch(t.action){case"view":return void this.ViewRecord(t.value);case"add":return void this.AddRecord();case"m_markas":return void this.ProcessActions(t.value);case"pagesize":this.actions.applyFilter({attr:"pagesize",value:t.value})}}},{key:"FindRecords",value:function(t){var e=t.filters;e.tags="",e.pagenumber=1,e.track_filter=!0,this.actions.updateFilterOptions(e)}},{key:"AddRecord",value:function(){this.router.navigate(["/wiki/process/0"])}},{key:"ViewRecord",value:function(t){this.router.navigate(["/wiki/profile/0"])}},{key:"getSelectedItems",value:function(t){this.SelectedItems=t,this.isItemsSelected=this.SelectedItems.length>0}},{key:"ProcessActions",value:function(t){if(this.isActionGranded){if(this.SelectedItems.length>0){var e=!0,i=!1,n=void 0;try{for(var o,s=this.SelectedItems[Symbol.iterator]();!(e=(o=s.next()).done);e=!0)o.value.actionstatus=t.actionstatus}catch(c){i=!0,n=c}finally{try{e||null==s.return||s.return()}finally{if(i)throw n}}this.dataService.ProcessActions(this.SelectedItems,t)}}else this.coreActions.Notify({title:"Permission Denied",text:"",css:"bg-danger"})}},{key:"refreshStats",value:function(){this.actions.refresh_pagination({type:0,totalrecords:this.Records,pagesize:this.FilterOptions.pagesize}),this.coreActions.refreshListStats({totalrecords:this.Records,pagesize:this.FilterOptions.pagesize,pagenumber:this.Pagination.currentPage})}}]),t}()).\u0275fac=function(t){return new(t||P)(b.Mb(g),b.Mb(S),b.Mb(p.a),b.Mb(y.a),b.Mb(k.a),b.Mb(m.a),b.Mb(a.c),b.Mb(a.a))},P.\u0275cmp=b.Gb({type:P,selectors:[["ng-component"]],hostVars:1,hostBindings:function(t,e){2&t&&b.Lc("@fadeInAnimation",void 0)},decls:3,vars:2,consts:[[1,"card"],[4,"ngIf"],[1,"m-b-40","m-t-40","text-center"],[1,"row"],[1,"col-md-3"],[3,"FilterOptions","Options","Action","SearchSelection"],[1,"col-md-9"],[3,"Options","isItemsSelected","Action","SelectAllCard"],[1,"card-body"],[3,"isActionGranded","View","SelectedItems"]],template:function(t,e){1&t&&(b.Sb(0,"div",0),b.Ec(1,j,3,0,"div",1),b.Ec(2,F,8,5,"div",1),b.Rb()),2&t&&(b.zb(1),b.nc("ngIf",!e.isAccessGranted),b.zb(1),b.nc("ngIf",e.isAccessGranted))},directives:[c.n,R.a,I.a,L],encapsulation:2,data:{animation:[u.a]}}),Object(l.a)([Object(d.e)(["wiki","filteroptions"])],P.prototype,"filteroptions$",void 0),Object(l.a)([Object(d.e)(["wiki","itemsselected"])],P.prototype,"isItemSelected$",void 0),Object(l.a)([Object(d.e)(["wiki","isloaded"])],P.prototype,"isloaded$",void 0),Object(l.a)([Object(d.e)(["wiki","records"])],P.prototype,"records$",void 0),Object(l.a)([Object(d.e)(["wiki","pagination"])],P.prototype,"pagination$",void 0),Object(l.a)([Object(d.e)(["users","auth"])],P.prototype,"auth$",void 0),P),W=i("dNLF"),H=((T=function(){function t(e){_classCallCheck(this,t),this.coreService=e}return _createClass(t,[{key:"getControls",value:function(t){var e=[];return 0===t.replyid&&(e.push(new W.g({key:"term",label:"Term",value:t.term,required:!0,order:0,maxLength:300,helpblock:"Enter term in short words"})),e.push(new W.g({key:"term_complete",label:"Term (Complete)",value:t.term_complete,required:!0,order:1,maxLength:1e3,helpblock:"Enter complete term / topic"}))),e.push(new W.h({key:"description",label:"Description",value:t.description,required:!0,tinymiceOptions:this.coreService.prepareInitAdvacneEditorSettings(),order:2})),0===t.replyid&&e.push(new W.g({key:"tags",label:"Tags (Optional)",value:t.tags,order:3,maxLength:1e3,helpblock:"Enter one or more labels / tags separated by comma"})),e.sort((function(t,e){return t.order-e.order}))}}]),t}()).\u0275fac=function(t){return new(t||T)(b.ac(p.a))},T.\u0275prov=b.Ib({token:T,factory:T.\u0275fac}),T),J=i("o+qO"),V=(($=function t(){_classCallCheck(this,t)}).\u0275mod=b.Kb({type:$}),$.\u0275inj=b.Jb({factory:function(t){return new(t||$)},providers:[g,S,H,m.a],imports:[[c.c,J.a,a.f,r.i]]}),$),K=i("+kG/");function U(t,e){1&t&&(b.Sb(0,"div"),b.Sb(1,"h2",1),b.Gc(2,"Access Denied"),b.Rb(),b.Rb())}function B(t,e){1&t&&b.Nb(0,"app-loader")}function q(t,e){if(1&t){var i=b.Tb();b.Sb(0,"dynamic-modal-form",9),b.ec("OnSubmit",(function(t){return b.xc(i),b.gc(2).SubmitForm(t)})),b.Rb()}if(2&t){var n=b.gc(2);b.nc("controls",n.controls)("showLoader",n.showLoader)("showCancel",!1)("showModal",!1)("submitText",n.submitText)}}function Y(t,e){if(1&t&&(b.Sb(0,"div"),b.Sb(1,"div",2),b.Sb(2,"div",3),b.Sb(3,"div",4),b.Sb(4,"div",5),b.Sb(5,"h4",6),b.Gc(6),b.Rb(),b.Rb(),b.Sb(7,"div",7),b.Ec(8,B,1,0,"app-loader",0),b.Ec(9,q,1,5,"dynamic-modal-form",8),b.Rb(),b.Rb(),b.Rb(),b.Rb(),b.Rb()),2&t){var i=b.gc();b.zb(6),b.Hc(i.formHeading),b.zb(2),b.nc("ngIf",i.showLoader),b.zb(1),b.nc("ngIf",!i.showLoader)}}var Q,X,Z=((X=function(){function t(e,i,n,o,s,c,r,a,l){_classCallCheck(this,t),this.settingService=e,this.dataService=i,this.coreService=n,this.coreActions=o,this.actions=s,this.route=c,this.formService=r,this.permission=a,this.router=l,this.isAccessGranted=!1,this.isActionGranded=!1,this.RecordID=0,this.ReplyID=0,this.controls=[],this.showLoader=!1,this.formHeading="Add Wiki Topic",this.submitText="Create Topic",this.Auth={}}return _createClass(t,[{key:"ngOnInit",value:function(){var t=this;this.auth$.subscribe((function(e){t.Auth=e,t.permission.GrandResourceAccess(!1,"1521396235692","1521396214790",e.Role)&&(t.isAccessGranted=!0,t.permission.GrandResourceAction("1521396235692",e.Role)&&(t.isActionGranded=!0))})),this.route.params.subscribe((function(e){t.RecordID=Number.parseInt(e.id,10),t.ReplyID=Number.parseInt(e.replyid,10),isNaN(t.RecordID)&&(t.RecordID=0),isNaN(t.ReplyID)&&(t.ReplyID=0),t.RecordID>0?(t.formHeading="Update Wiki Topic",t.submitText="Update",t.LoadInfo()):t.ReplyID>0?(t.formHeading="Post Suggestion",t.submitText="Submit",t.LoadInfo()):t.initializeControls(t.settingService.getInitObject())}))}},{key:"LoadInfo",value:function(){var t=this;this.showLoader=!0,console.log("rrccc "+this.ReplyID),this.dataService.GetInfo(this.RecordID).subscribe((function(e){if("success"===e.status)if(t.ReplyID>0){t.Info=e.post;var i=t.settingService.getInitObject();i.replyid=t.ReplyID,t.initializeControls(i)}else t.initializeControls(e.post);else t.coreActions.Notify({title:e.message,text:"",css:"bg-error"}),t.initializeControls(t.settingService.getInitObject());t.showLoader=!1}))}},{key:"initializeControls",value:function(t){this.controls=this.formService.getControls(t)}},{key:"SubmitForm",value:function(t){var e=this;if(this.isActionGranded){this.showLoader=!0;var i="Added";this.RecordID>0&&(t.id=this.RecordID,i="Updated"),t.userid=this.Auth.User.id,t.replyid=this.ReplyID,this.ReplyID>0&&(t.term=this.Info.term,t.term_complete=this.Info.term_complete,t.tags=this.Info.tags),this.dataService.AddRecord(t).subscribe((function(t){"error"===t.status?e.coreActions.Notify({title:t.message,text:"",css:"bg-error"}):(e.coreActions.Notify({title:"Record "+i+" Successfully",text:"",css:"bg-success"}),e.actions.reloadList(),e.router.navigate(e.ReplyID>0?["/wiki/profile/"+e.ReplyID]:["/wiki/profile/"+t.record.id])),e.showLoader=!1}),(function(t){e.showLoader=!1,e.coreActions.Notify({title:"Error Occured",text:"",css:"bg-danger"})}))}else this.coreActions.Notify({title:"Permission Denied",text:"",css:"bg-danger"})}}]),t}()).\u0275fac=function(t){return new(t||X)(b.Mb(g),b.Mb(S),b.Mb(p.a),b.Mb(y.a),b.Mb(m.a),b.Mb(a.a),b.Mb(H),b.Mb(k.a),b.Mb(a.c))},X.\u0275cmp=b.Gb({type:X,selectors:[["ng-component"]],decls:2,vars:2,consts:[[4,"ngIf"],[1,"m-b-40","m-t-40","text-center"],[1,"row","justify-content-md-center"],[1,"col-md-8"],[1,"card"],[1,"card-header"],[1,"m-b-0"],[1,"card-body"],[3,"controls","showLoader","showCancel","showModal","submitText","OnSubmit",4,"ngIf"],[3,"controls","showLoader","showCancel","showModal","submitText","OnSubmit"]],template:function(t,e){1&t&&(b.Ec(0,U,3,0,"div",0),b.Ec(1,Y,10,3,"div",0)),2&t&&(b.nc("ngIf",!e.isAccessGranted),b.zb(1),b.nc("ngIf",e.isAccessGranted))},directives:[c.n,_.a,K.a],encapsulation:2,data:{animation:[u.a]}}),Object(l.a)([Object(d.e)(["users","auth"])],X.prototype,"auth$",void 0),X),tt=((Q=function t(){_classCallCheck(this,t)}).\u0275mod=b.Kb({type:Q}),Q.\u0275inj=b.Jb({factory:function(t){return new(t||Q)},providers:[g,S,H,m.a],imports:[[c.c,J.a,a.f,r.i]]}),Q);function et(t,e){if(1&t&&(b.Sb(0,"h2"),b.Gc(1),b.Rb()),2&t){var i=b.gc().$implicit;b.zb(1),b.Hc(i.term_complete)}}var it=function(t){return[t]};function nt(t,e){if(1&t&&(b.Sb(0,"span"),b.Sb(1,"a",8),b.Gc(2),b.Rb(),b.Gc(3,", "),b.Rb()),2&t){var i=e.$implicit;b.zb(1),b.nc("routerLink",b.rc(2,it,"/wiki/tag/"+i.slug)),b.zb(1),b.Hc(i.title)}}function ot(t,e){if(1&t&&(b.Sb(0,"p"),b.Gc(1," Tags: "),b.Ec(2,nt,4,4,"span",7),b.Rb()),2&t){var i=b.gc().$implicit;b.zb(2),b.nc("ngForOf",i.tags_arr)}}function st(t,e){if(1&t&&(b.Sb(0,"div",4),b.Sb(1,"div",5),b.Ec(2,et,2,1,"h2",0),b.Nb(3,"div",6),b.Nb(4,"hr"),b.Sb(5,"p"),b.Gc(6),b.hc(7,"date"),b.hc(8,"date"),b.Rb(),b.Ec(9,ot,3,1,"p",0),b.Nb(10,"hr"),b.Rb(),b.Rb()),2&t){var i=e.$implicit,n=e.index;b.zb(2),b.nc("ngIf",0===n),b.zb(1),b.nc("innerHTML",i.description,b.yc),b.zb(3),b.Kc(" Recommended: ",i.recommended,", posted: ",b.jc(7,6,i.created_at,"fullDate"),", updated: ",b.jc(8,9,i.updated_at,"fullDate")," "),b.zb(3),b.nc("ngIf",i.tags_arr.length>0&&0===i.replyid)}}function ct(t,e){if(1&t&&(b.Sb(0,"div"),b.Ec(1,st,11,12,"div",3),b.Rb()),2&t){var i=b.gc();b.zb(1),b.nc("ngForOf",i.Info)}}var rt,at=((rt=function t(){_classCallCheck(this,t),this.Info={},this.Author_FullName=""}).\u0275fac=function(t){return new(t||rt)},rt.\u0275cmp=b.Gb({type:rt,selectors:[["app-wiki-info"]],inputs:{Info:"Info",Author_FullName:"Author_FullName"},decls:4,vars:4,consts:[[4,"ngIf"],[1,"m-b-10","m-t-10"],[1,"btn","btn-primary",3,"routerLink"],["class","card",4,"ngFor","ngForOf"],[1,"card"],[1,"card-body"],[3,"innerHTML"],[4,"ngFor","ngForOf"],[3,"routerLink"]],template:function(t,e){1&t&&(b.Ec(0,ct,2,1,"div",0),b.Sb(1,"div",1),b.Sb(2,"a",2),b.Gc(3,"Post Suggestion"),b.Rb(),b.Rb()),2&t&&(b.nc("ngIf",e.Info.length>0),b.zb(2),b.nc("routerLink",b.rc(2,it,"/wiki/process/0/"+e.Info[0].id)))},directives:[c.n,a.e,c.m],pipes:[c.e],encapsulation:2}),rt);function lt(t,e){1&t&&b.Nb(0,"app-loader")}function dt(t,e){if(1&t){var i=b.Tb();b.Sb(0,"div"),b.Sb(1,"div",5),b.Sb(2,"app-toolbar-v2",6),b.ec("Action",(function(t){return b.xc(i),b.gc().toolbaraction(t)})),b.Rb(),b.Sb(3,"div",7),b.Nb(4,"app-wiki-info",8),b.Rb(),b.Rb(),b.Rb()}if(2&t){var n=b.gc();b.zb(2),b.nc("Options",n.ToolbarOptions)("isItemsSelected",n.isItemsSelected),b.zb(2),b.nc("Author_FullName",n.Author_FullName)("Info",n.Info)}}var ut,bt=((ut=function(){function t(e,i,n,o,s,c,r,a,l){_classCallCheck(this,t),this.settingService=e,this.dataService=i,this.coreService=n,this.coreActions=o,this.actions=s,this.route=c,this.formService=r,this.permission=a,this.router=l,this.isItemsSelected=!0,this.RecordID=0,this.FilterOptions={},this.controls=[],this.showLoader=!1,this.formHeading="Wiki Detail",this.submitText="Submit",this.Info={},this.uploadedFiles=[],this.SelectedItems=[],this.Author_FullName="",this.isAccessGranted=!1,this.isActionGranded=!1}return _createClass(t,[{key:"ngOnInit",value:function(){var t=this;this.auth$.subscribe((function(e){t.permission.GrandResourceAccess(!1,"1521396235692","1521396214790",e.Role)&&(t.isAccessGranted=!0,t.permission.GrandResourceAction("1521396235692",e.Role)&&(t.isActionGranded=!0))})),this.ToolbarOptions=this.settingService.getToolbarOptions(),this.ToolbarOptions.showtoolbar=!1,this.ToolbarOptions.showcheckAll=!1,this.ToolbarOptions.showsecondarytoolbar=!0,this.ToolbarOptions.ProfileView=!0,this.route.params.subscribe((function(e){t.RecordID=Number.parseInt(e.id,10),isNaN(t.RecordID)&&(t.RecordID=0),t.RecordID>0&&t.LoadInfo()}))}},{key:"LoadInfo",value:function(){var t=this;this.showLoader=!0,this.dataService.GetDetailInfo(this.RecordID).subscribe((function(e){if("error"===e.status)t.coreActions.Notify({title:e.message,text:"",css:"bg-success"}),t.router.navigate(["/wiki"]);else{t.Info=e.post,t.SelectedItems=[];var i=!0,n=!1,o=void 0;try{for(var s,c=t.Info[Symbol.iterator]();!(i=(s=c.next()).done);i=!0){var r=s.value;null!==r.updated_at&&(r.updated_at=new Date(parseInt(r.updated_at.substr(6),10))),r.tags_arr=null!==r.tags&&""!==r.tags?t.ProcessCategories(r.tags.split(",")):[],t.SelectedItems.push(r)}}catch(a){n=!0,o=a}finally{try{i||null==c.return||c.return()}finally{if(n)throw o}}}t.showLoader=!1}))}},{key:"ProcessCategories",value:function(t){var e=[],i=!0,n=!1,o=void 0;try{for(var s,c=t[Symbol.iterator]();!(i=(s=c.next()).done);i=!0){var r=s.value;e.push({title:r.trim(),slug:r.trim().replace(/\s+/g,"-").toLowerCase()})}}catch(a){n=!0,o=a}finally{try{i||null==c.return||c.return()}finally{if(n)throw o}}return e}},{key:"toolbaraction",value:function(t){switch(t.action){case"m_markas":this.ProcessActions(t.value)}}},{key:"ProcessActions",value:function(t){if(this.isActionGranded){if(this.SelectedItems.length>0){var e=!0,i=!1,n=void 0;try{for(var o,s=this.SelectedItems[Symbol.iterator]();!(e=(o=s.next()).done);e=!0)o.value.actionstatus=t.actionstatus}catch(c){i=!0,n=c}finally{try{e||null==s.return||s.return()}finally{if(i)throw n}}this.dataService.ProcessActions(this.SelectedItems,t),"delete"===t.actionstatus&&this.router.navigate(["/wiki/"])}}else this.coreActions.Notify({title:"Permission Denied",text:"",css:"bg-danger"})}}]),t}()).\u0275fac=function(t){return new(t||ut)(b.Mb(g),b.Mb(S),b.Mb(p.a),b.Mb(y.a),b.Mb(m.a),b.Mb(a.a),b.Mb(H),b.Mb(k.a),b.Mb(a.c))},ut.\u0275cmp=b.Gb({type:ut,selectors:[["ng-component"]],hostVars:1,hostBindings:function(t,e){2&t&&b.Lc("@fadeInAnimation",void 0)},decls:6,vars:2,consts:[[1,"row"],[1,"col-lg-12"],[1,"row","justify-content-md-center"],[1,"col-md-8","col-sm-12","col-xs-12"],[4,"ngIf"],[1,"card"],[3,"Options","isItemsSelected","Action"],[1,"card-body"],[3,"Author_FullName","Info"]],template:function(t,e){1&t&&(b.Sb(0,"div",0),b.Sb(1,"div",1),b.Sb(2,"div",2),b.Sb(3,"div",3),b.Ec(4,lt,1,0,"app-loader",4),b.Ec(5,dt,5,4,"div",4),b.Rb(),b.Rb(),b.Rb(),b.Rb()),2&t&&(b.zb(4),b.nc("ngIf",e.showLoader),b.zb(1),b.nc("ngIf",!e.showLoader))},directives:[c.n,_.a,I.a,at],encapsulation:2,data:{animation:[u.a]}}),Object(l.a)([Object(d.e)(["users","auth"])],ut.prototype,"auth$",void 0),ut);i.d(e,"WikiModule",(function(){return ft}));var ht,pt=[{path:"",data:{title:"Wiki Management",urls:[{title:"Dashboard",url:"/"},{title:"Wiki",url:"/wiki"},{title:"Management"}]},component:E},{path:"tag/:tagname",data:{title:"Wiki Management",urls:[{title:"Dashboard",url:"/"},{title:"Wiki",url:"/wiki"},{title:"Management"}]},component:E},{path:"profile/:id",data:{title:"Wiki Information",urls:[{title:"Dashboard",url:"/"},{title:"Wiki",url:"/wiki"},{title:"Wiki Information"}]},component:bt},{path:"process/:id",data:{title:"Process Wiki",urls:[{title:"Dashboard",url:"/"},{title:"Wiki",url:"/wiki"},{title:"Process"}]},component:Z},{path:"process/:id/:replyid",data:{title:"Process Wiki",urls:[{title:"Dashboard",url:"/"},{title:"Wiki",url:"/wiki"},{title:"Process"}]},component:Z}],ft=((ht=function t(){_classCallCheck(this,t)}).\u0275mod=b.Kb({type:ht}),ht.\u0275inj=b.Jb({factory:function(t){return new(t||ht)},providers:[g,S,m.a],imports:[[c.c,r.i,J.a,tt,V,s.c,a.f.forChild(pt)]]}),ht)}}]);