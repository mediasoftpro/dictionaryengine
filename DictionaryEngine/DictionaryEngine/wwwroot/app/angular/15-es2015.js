(window.webpackJsonp=window.webpackJsonp||[]).push([[15],{Q59R:function(t,e,i){"use strict";i.r(e);var s=i("1kSV"),o=i("ofXK"),c=i("3Pt+"),n=i("tyNb"),r=i("mrSG"),a=i("Usal"),l=i("pdjO"),d=i("fXoL"),h=i("II9H"),b=i("nD3/"),p=i("1pjZ");let u=(()=>{class t{constructor(t,e){this.coreService=t,this.config=e;const i=e.getConfig("host");this.apiOptions={load:i+"api/wiki/load",getinfo:i+"api/wiki/getinfo",action:i+"api/wiki/action",proc:i+"api/wiki/proc"},this.init_toolbar_options(),this.init_search_options()}init_search_options(){this.searchOptions={showpanel:!0,showSearchPanel:!0,showAdvanceSearchLink:!1,term:"",topselectioncheck:!0,navList:[],filters:[],dropdownFilters:[],checkFilters:[],categories:[],selectedcategory:"",singleaction:!1,actions:this.navActions()}}navActions(){return[{id:1,title:"Create Wiki",tooltip:"Create new Wiki",row:1,icon:"icon-file-plus",options:{},css:"btn m-b-5 btn-block btn-success",event:"add"}]}init_search_profile_options(){return{showpanel:!0,showSearchPanel:!1,term:"",topselectioncheck:!1,navList:this.navList(),filters:[],dropdownFilters:[],categories:[],selectedcategory:"",singleaction:!1,actions:this.navActions()}}navList(){return[{id:1,title:"Edit",clickevent:!0,event:"edit",css:"",url:"",icon:""},{id:2,title:"Delete",clickevent:!0,event:"delete",css:"",url:"",icon:""}]}getSearchOptionsProfile(){return this.init_search_profile_options()}init_toolbar_options(){this.toolbarOptions={showtoolbar:!0,showsecondarytoolbar:!0,showcheckAll:!1,navbarcss:h.d.NAVBAR_CSS,left_options:[],left_caption:"",right_caption:"",right_options:[],actions:[]},this.toolbarOptions.right_options.push({title:"Order",ismultiple:!0,position:"right",icon:"icon-sort-by-order-alt position-left",Options:[{id:"0",title:"Date",value:"id",isclick:!0,clickevent:"orderby",tooltip:"Order by Date"},{id:"1",title:"Term",value:"term",isclick:!0,clickevent:"orderby",tooltip:"Order by Term"}]}),this.toolbarOptions.actions.push({title:"Mark As",ismultiple:!0,icon:"",Options:[{id:"2",title:"Delete",value:0,actionstatus:"delete",css:h.b.DANGER_BUTTON,attr:"",isclick:!0,clickevent:"m_markas",icon:h.c.DELETE_ICON,tooltip:"Delete selected records"}]})}getApiOptions(){return this.apiOptions}getUploadOptions(){return this.uploadOptions}getToolbarOptions(){return this.toolbarOptions}getSearchOptions(){return this.searchOptions}getInitObject(){return{id:0,term:"",term_complete:"",description:"",tags:"",replyid:0,userid:0}}}return t.\u0275fac=function(e){return new(e||t)(d.ac(b.a),d.ac(p.a))},t.\u0275prov=d.Ib({token:t,factory:t.\u0275fac}),t})();var g=i("tk/3"),f=i("kP+A"),m=i("LEd3");let S=(()=>{class t{constructor(t,e,i,s){this.settings=t,this.http=e,this.actions=i,this.coreActions=s}LoadRecords(t){const e=this.settings.getApiOptions().load;this.actions.loadStarted(),this.http.post(e,JSON.stringify(t)).subscribe(e=>{this.actions.loadSucceeded(e),this.coreActions.refreshListStats({totalrecords:e.records,pagesize:t.pagesize,pagenumber:t.pagenumber})},t=>{this.actions.loadFailed(t)})}GetInfo(t){const e=this.settings.getApiOptions().getinfo;return this.http.post(e,JSON.stringify({id:t}))}GetDetailInfo(t){const e=this.settings.getApiOptions().getinfo;return this.http.post(e,JSON.stringify({id:t,detailview:!0}))}AddRecord(t){return this.http.post(this.settings.getApiOptions().proc,JSON.stringify(t))}DeleteRecord(t,e){t.actionstatus="delete";const i=[];i.push(t),this.ProcessActions(i,"delete")}ProcessActions(t,e){this.actions.applyChanges({SelectedItems:t,isenabled:e}),this.http.post(this.settings.getApiOptions().action,JSON.stringify(t)).subscribe(t=>{let i="Operation Performed";"delete"===e&&(i="Record Removed"),this.coreActions.Notify({title:i,text:"",css:"bg-success"})},t=>{this.coreActions.Notify({title:"Error Occured",text:"",css:"bg-danger"})})}}return t.\u0275fac=function(e){return new(e||t)(d.ac(u),d.ac(g.b),d.ac(f.a),d.ac(m.a))},t.\u0275prov=d.Ib({token:t,factory:t.\u0275fac}),t})();var v=i("Hjmt"),R=i("/H0e"),I=i("4HLj"),O=i("R0Ic"),w=i("QxdJ"),y=i("cScK"),A=i("RDfn"),k=i("aIzJ");function D(t,e){1&t&&d.Nb(0,"app-loader")}function G(t,e){if(1&t){const t=d.Tb();d.Sb(0,"tr",9),d.Sb(1,"td",10),d.Sb(2,"div",5),d.Sb(3,"input",11),d.ec("ngModelChange",(function(i){return d.xc(t),e.$implicit.Selected=i}))("ngModelChange",(function(){return d.xc(t),d.gc(3).checkChange()})),d.Rb(),d.Nb(4,"label",12),d.Rb(),d.Rb(),d.Sb(5,"td"),d.Sb(6,"a",13),d.ec("click",(function(i){d.xc(t);const s=e.$implicit;return d.gc(3).viewRecord(s,i),!1})),d.Gc(7),d.Rb(),d.Rb(),d.Sb(8,"td"),d.Gc(9),d.Rb(),d.Sb(10,"td",14),d.Sb(11,"a",15),d.ec("click",(function(i){d.xc(t);const s=e.$implicit;return d.gc(3).editRecord(s,i),!1})),d.Nb(12,"i",16),d.Rb(),d.Sb(13,"a",17),d.ec("click",(function(i){d.xc(t);const s=e.$implicit,o=e.index;return d.gc(3).delete(s,o,i),!1})),d.Nb(14,"i",18),d.Rb(),d.Rb(),d.Rb()}if(2&t){const t=e.$implicit;d.nc("@fadeIn",void 0)("hidden",t.isdeleted),d.zb(3),d.oc("id",t.id),d.nc("ngModel",t.Selected),d.zb(1),d.oc("for",t.id),d.zb(3),d.Hc(t.term),d.zb(2),d.Ic(" ",t.term_complete," ")}}function x(t,e){if(1&t){const t=d.Tb();d.Sb(0,"div"),d.Sb(1,"div",3),d.Sb(2,"table",4),d.Sb(3,"thead"),d.Sb(4,"tr"),d.Sb(5,"th"),d.Sb(6,"div",5),d.Sb(7,"input",6),d.ec("ngModelChange",(function(e){return d.xc(t),d.gc(2).selectall=e}))("ngModelChange",(function(){return d.xc(t),d.gc(2).processChange()})),d.Rb(),d.Nb(8,"label",7),d.Rb(),d.Rb(),d.Sb(9,"th"),d.Gc(10,"Topic"),d.Rb(),d.Sb(11,"th"),d.Gc(12,"Detail Topic"),d.Rb(),d.Sb(13,"th"),d.Gc(14,"--"),d.Rb(),d.Rb(),d.Rb(),d.Sb(15,"tbody"),d.Ec(16,G,15,7,"tr",8),d.hc(17,"async"),d.Rb(),d.Rb(),d.Rb(),d.Rb()}if(2&t){const t=d.gc(2);d.zb(7),d.nc("ngModel",t.selectall),d.zb(9),d.nc("ngForOf",d.ic(17,3,t.Data$))("ngForTrackBy",t.getKey)}}function M(t,e){1&t&&d.Nb(0,"app-norecord")}function _(t,e){if(1&t&&(d.Sb(0,"div"),d.Ec(1,x,18,5,"div",0),d.hc(2,"async"),d.Ec(3,M,1,0,"app-norecord",0),d.hc(4,"async"),d.Rb()),2&t){const t=d.gc();d.zb(1),d.nc("ngIf",d.ic(2,2,t.Data$).length>0),d.zb(2),d.nc("ngIf",0===d.ic(4,4,t.Data$).length)}}let z=(()=>{class t{constructor(t,e,i,s){this.actions=t,this.coreActions=e,this.dataService=i,this.router=s,this.isActionGranded=!1,this.View=new d.n,this.SelectedItems=new d.n,this.selectall=!1}ngOnInit(){this.selectAll$.subscribe(t=>{this.selectall=t,this.checkChange()})}viewRecord(t,e){this.router.navigate(["/wiki/profile/"+t.id]),e.stopPropagation()}editRecord(t,e){this.router.navigate(["/wiki/process/"+t.id]),e.stopPropagation()}getKey(t,e){return e.id}delete(t,e,i){this.isActionGranded?!0===confirm("Are you sure you want to delete selected record?")&&this.dataService.DeleteRecord(t,e):this.coreActions.Notify({title:"Permission Denied",text:"",css:"bg-danger"})}PaginationChange(t){this.actions.applyFilter({attr:"pagenumber",value:t}),this.actions.updatePaginationCurrentPage({currentpage:t})}processChange(){this.actions.selectAll(this.selectall)}checkChange(){this.Data$.subscribe(t=>{const e=[];for(const i of t)i.Selected&&e.push(i);this.SelectedItems.emit(e)})}}return t.\u0275fac=function(e){return new(e||t)(d.Mb(f.a),d.Mb(m.a),d.Mb(S),d.Mb(n.c))},t.\u0275cmp=d.Gb({type:t,selectors:[["app-list"]],inputs:{isActionGranded:"isActionGranded"},outputs:{View:"View",SelectedItems:"SelectedItems"},decls:10,vars:15,consts:[[4,"ngIf"],[1,"text-center","content-group-lg","pt-20"],[3,"currentPage","totalRecords","pageSize","OnSelection"],[1,"table-responsive"],[1,"table","table-bordered","table-hover","table-striped","no-wrap"],[1,"checkbox"],["id","selectall","type","checkbox",3,"ngModel","ngModelChange"],["for","selectall",1,"p-b-0","p-t-0"],[3,"hidden",4,"ngFor","ngForOf","ngForTrackBy"],[3,"hidden"],[2,"width","5%"],["type","checkbox",3,"ngModel","id","ngModelChange"],[3,"for"],["href","",1,"text-bigger",3,"click"],[1,"text-nowrap"],["href","#","data-toggle","tooltip","data-original-title","Edit",3,"click"],[1,"fa","fa-pencil","text-inverse","m-r-10"],["href","#","data-toggle","tooltip","data-original-title","Close",3,"click"],[1,"fa","fa-close","text-danger"]],template:function(t,e){1&t&&(d.Nb(0,"alert"),d.Ec(1,D,1,0,"app-loader",0),d.hc(2,"async"),d.Ec(3,_,5,6,"div",0),d.hc(4,"async"),d.Sb(5,"div",1),d.Sb(6,"pagination",2),d.ec("OnSelection",(function(t){return e.PaginationChange(t)})),d.hc(7,"async"),d.hc(8,"async"),d.hc(9,"async"),d.Rb(),d.Rb()),2&t&&(d.zb(1),d.nc("ngIf",d.ic(2,5,e.loading$)),d.zb(2),d.nc("ngIf",!d.ic(4,7,e.loading$)),d.zb(3),d.nc("currentPage",d.ic(7,9,e.pagination$).currentPage)("totalRecords",d.ic(8,11,e.pagination$).totalRecords)("pageSize",d.ic(9,13,e.pagination$).pageSize))},directives:[w.a,o.n,y.a,A.a,c.a,c.n,c.q,o.m,k.a],pipes:[o.b],encapsulation:2,data:{animation:[Object(O.k)("fadeIn",[Object(O.j)(":enter",[Object(O.i)({opacity:"0",background:"#f5fb98"}),Object(O.e)("300ms ease-out",Object(O.f)([Object(O.i)({opacity:0,transform:"translateY(-75%)",offset:0}),Object(O.i)({opacity:.5,transform:"translateY(35px)",offset:.5}),Object(O.i)({opacity:1,transform:"translateY(0)",offset:1})]))])])]}}),Object(r.a)([Object(a.e)(["wiki","posts"])],t.prototype,"Data$",void 0),Object(r.a)([Object(a.e)(["wiki","loading"])],t.prototype,"loading$",void 0),Object(r.a)([Object(a.e)(["wiki","pagination"])],t.prototype,"pagination$",void 0),Object(r.a)([Object(a.e)(["wiki","selectall"])],t.prototype,"selectAll$",void 0),t})();function N(t,e){1&t&&(d.Sb(0,"div"),d.Sb(1,"h2",2),d.Gc(2,"Access Denied"),d.Rb(),d.Rb())}function L(t,e){if(1&t){const t=d.Tb();d.Sb(0,"div"),d.Sb(1,"div",3),d.Sb(2,"div",4),d.Sb(3,"app-navigation-v2",5),d.ec("Action",(function(e){return d.xc(t),d.gc().toolbaraction(e)}))("SearchSelection",(function(e){return d.xc(t),d.gc().FindRecords(e)})),d.Rb(),d.Rb(),d.Sb(4,"div",6),d.Sb(5,"app-toolbar-v2",7),d.ec("Action",(function(e){return d.xc(t),d.gc().toolbaraction(e)}))("SelectAllCard",(function(e){return d.xc(t),d.gc().selectAll(e)})),d.Rb(),d.Sb(6,"div",8),d.Sb(7,"app-list",9),d.ec("View",(function(e){return d.xc(t),d.gc().toolbaraction(e)}))("SelectedItems",(function(e){return d.xc(t),d.gc().getSelectedItems(e)})),d.Rb(),d.Rb(),d.Rb(),d.Rb(),d.Rb()}if(2&t){const t=d.gc();d.zb(3),d.nc("FilterOptions",t.FilterOptions)("Options",t.SearchOptions),d.zb(2),d.nc("Options",t.ToolbarOptions)("isItemsSelected",t.isItemsSelected),d.zb(2),d.nc("isActionGranded",t.isActionGranded)}}let j=(()=>{class t{constructor(t,e,i,s,o,c,n,r){this.settingService=t,this.dataService=e,this.coreService=i,this.coreActions=s,this.permission=o,this.actions=c,this.router=n,this.route=r,this.isAccessGranted=!1,this.isActionGranded=!1,this.heading="Wiki",this.subheading="Management",this.isItemsSelected=!1,this.Records=0,this.Pagination={}}ngOnInit(){this.auth$.subscribe(t=>{this.permission.GrandResourceAccess(!1,"1521396235692","1521396214790",t.Role)&&(this.isAccessGranted=!0,this.permission.GrandResourceAction("1521396235692",t.Role)&&(this.isActionGranded=!0))}),this.SearchOptions=this.settingService.getSearchOptions(),this.ToolbarOptions=this.settingService.getToolbarOptions(),this.filteroptions$.subscribe(t=>{this.FilterOptions=t,t.track_filter&&(this.dataService.LoadRecords(t),t.track_filter=!1,this.actions.updateFilterOptions(t))}),this.isloaded$.subscribe(t=>{t?this.refreshStats():this.dataService.LoadRecords(this.FilterOptions)}),this.isItemSelected$.subscribe(t=>{this.isItemsSelected=t}),this.records$.subscribe(t=>{this.Records=t}),this.pagination$.subscribe(t=>{this.Pagination=t}),this.route.params.subscribe(t=>{void 0!==t.tagname&&(console.log("tag filter initiated"),this.FilterOptions.tags=t.tagname,this.FilterOptions.track_filter=!0,this.actions.updateFilterOptions(this.FilterOptions))})}selectAll(t){this.actions.selectAll(t)}toolbaraction(t){switch(t.action){case"view":return void this.ViewRecord(t.value);case"add":return void this.AddRecord();case"m_markas":return void this.ProcessActions(t.value);case"pagesize":this.actions.applyFilter({attr:"pagesize",value:t.value})}}FindRecords(t){const e=t.filters;e.tags="",e.pagenumber=1,e.track_filter=!0,this.actions.updateFilterOptions(e)}AddRecord(){this.router.navigate(["/wiki/process/0"])}ViewRecord(t){this.router.navigate(["/wiki/profile/0"])}getSelectedItems(t){this.SelectedItems=t,this.isItemsSelected=this.SelectedItems.length>0}ProcessActions(t){if(this.isActionGranded){if(this.SelectedItems.length>0){for(const e of this.SelectedItems)e.actionstatus=t.actionstatus;this.dataService.ProcessActions(this.SelectedItems,t)}}else this.coreActions.Notify({title:"Permission Denied",text:"",css:"bg-danger"})}refreshStats(){this.actions.refresh_pagination({type:0,totalrecords:this.Records,pagesize:this.FilterOptions.pagesize}),this.coreActions.refreshListStats({totalrecords:this.Records,pagesize:this.FilterOptions.pagesize,pagenumber:this.Pagination.currentPage})}}return t.\u0275fac=function(e){return new(e||t)(d.Mb(u),d.Mb(S),d.Mb(b.a),d.Mb(m.a),d.Mb(v.a),d.Mb(f.a),d.Mb(n.c),d.Mb(n.a))},t.\u0275cmp=d.Gb({type:t,selectors:[["ng-component"]],hostVars:1,hostBindings:function(t,e){2&t&&d.Lc("@fadeInAnimation",void 0)},decls:3,vars:2,consts:[[1,"card"],[4,"ngIf"],[1,"m-b-40","m-t-40","text-center"],[1,"row"],[1,"col-md-3"],[3,"FilterOptions","Options","Action","SearchSelection"],[1,"col-md-9"],[3,"Options","isItemsSelected","Action","SelectAllCard"],[1,"card-body"],[3,"isActionGranded","View","SelectedItems"]],template:function(t,e){1&t&&(d.Sb(0,"div",0),d.Ec(1,N,3,0,"div",1),d.Ec(2,L,8,5,"div",1),d.Rb()),2&t&&(d.zb(1),d.nc("ngIf",!e.isAccessGranted),d.zb(1),d.nc("ngIf",e.isAccessGranted))},directives:[o.n,R.a,I.a,z],encapsulation:2,data:{animation:[l.a]}}),Object(r.a)([Object(a.e)(["wiki","filteroptions"])],t.prototype,"filteroptions$",void 0),Object(r.a)([Object(a.e)(["wiki","itemsselected"])],t.prototype,"isItemSelected$",void 0),Object(r.a)([Object(a.e)(["wiki","isloaded"])],t.prototype,"isloaded$",void 0),Object(r.a)([Object(a.e)(["wiki","records"])],t.prototype,"records$",void 0),Object(r.a)([Object(a.e)(["wiki","pagination"])],t.prototype,"pagination$",void 0),Object(r.a)([Object(a.e)(["users","auth"])],t.prototype,"auth$",void 0),t})();var F=i("dNLF");let T=(()=>{class t{constructor(t){this.coreService=t}getControls(t){const e=[];return 0===t.replyid&&(e.push(new F.g({key:"term",label:"Term",value:t.term,required:!0,order:0,maxLength:300,helpblock:"Enter term in short words"})),e.push(new F.g({key:"term_complete",label:"Term (Complete)",value:t.term_complete,required:!0,order:1,maxLength:1e3,helpblock:"Enter complete term / topic"}))),e.push(new F.h({key:"description",label:"Description",value:t.description,required:!0,tinymiceOptions:this.coreService.prepareInitAdvacneEditorSettings(),order:2})),0===t.replyid&&e.push(new F.g({key:"tags",label:"Tags (Optional)",value:t.tags,order:3,maxLength:1e3,helpblock:"Enter one or more labels / tags separated by comma"})),e.sort((t,e)=>t.order-e.order)}}return t.\u0275fac=function(e){return new(e||t)(d.ac(b.a))},t.\u0275prov=d.Ib({token:t,factory:t.\u0275fac}),t})();var P=i("o+qO");let C=(()=>{class t{}return t.\u0275mod=d.Kb({type:t}),t.\u0275inj=d.Jb({factory:function(e){return new(e||t)},providers:[u,S,T,f.a],imports:[[o.c,P.a,n.f,c.i]]}),t})();var $=i("+kG/");function E(t,e){1&t&&(d.Sb(0,"div"),d.Sb(1,"h2",1),d.Gc(2,"Access Denied"),d.Rb(),d.Rb())}function W(t,e){1&t&&d.Nb(0,"app-loader")}function H(t,e){if(1&t){const t=d.Tb();d.Sb(0,"dynamic-modal-form",9),d.ec("OnSubmit",(function(e){return d.xc(t),d.gc(2).SubmitForm(e)})),d.Rb()}if(2&t){const t=d.gc(2);d.nc("controls",t.controls)("showLoader",t.showLoader)("showCancel",!1)("showModal",!1)("submitText",t.submitText)}}function J(t,e){if(1&t&&(d.Sb(0,"div"),d.Sb(1,"div",2),d.Sb(2,"div",3),d.Sb(3,"div",4),d.Sb(4,"div",5),d.Sb(5,"h4",6),d.Gc(6),d.Rb(),d.Rb(),d.Sb(7,"div",7),d.Ec(8,W,1,0,"app-loader",0),d.Ec(9,H,1,5,"dynamic-modal-form",8),d.Rb(),d.Rb(),d.Rb(),d.Rb(),d.Rb()),2&t){const t=d.gc();d.zb(6),d.Hc(t.formHeading),d.zb(2),d.nc("ngIf",t.showLoader),d.zb(1),d.nc("ngIf",!t.showLoader)}}let V=(()=>{class t{constructor(t,e,i,s,o,c,n,r,a){this.settingService=t,this.dataService=e,this.coreService=i,this.coreActions=s,this.actions=o,this.route=c,this.formService=n,this.permission=r,this.router=a,this.isAccessGranted=!1,this.isActionGranded=!1,this.RecordID=0,this.ReplyID=0,this.controls=[],this.showLoader=!1,this.formHeading="Add Wiki Topic",this.submitText="Create Topic",this.Auth={}}ngOnInit(){this.auth$.subscribe(t=>{this.Auth=t,this.permission.GrandResourceAccess(!1,"1521396235692","1521396214790",t.Role)&&(this.isAccessGranted=!0,this.permission.GrandResourceAction("1521396235692",t.Role)&&(this.isActionGranded=!0))}),this.route.params.subscribe(t=>{this.RecordID=Number.parseInt(t.id,10),this.ReplyID=Number.parseInt(t.replyid,10),isNaN(this.RecordID)&&(this.RecordID=0),isNaN(this.ReplyID)&&(this.ReplyID=0),this.RecordID>0?(this.formHeading="Update Wiki Topic",this.submitText="Update",this.LoadInfo()):this.ReplyID>0?(this.formHeading="Post Suggestion",this.submitText="Submit",this.LoadInfo()):this.initializeControls(this.settingService.getInitObject())})}LoadInfo(){this.showLoader=!0,console.log("rrccc "+this.ReplyID),this.dataService.GetInfo(this.RecordID).subscribe(t=>{if("success"===t.status)if(this.ReplyID>0){this.Info=t.post;const e=this.settingService.getInitObject();e.replyid=this.ReplyID,this.initializeControls(e)}else this.initializeControls(t.post);else this.coreActions.Notify({title:t.message,text:"",css:"bg-error"}),this.initializeControls(this.settingService.getInitObject());this.showLoader=!1})}initializeControls(t){this.controls=this.formService.getControls(t)}SubmitForm(t){if(!this.isActionGranded)return void this.coreActions.Notify({title:"Permission Denied",text:"",css:"bg-danger"});this.showLoader=!0;let e="Added";this.RecordID>0&&(t.id=this.RecordID,e="Updated"),t.userid=this.Auth.User.id,t.replyid=this.ReplyID,this.ReplyID>0&&(t.term=this.Info.term,t.term_complete=this.Info.term_complete,t.tags=this.Info.tags),this.dataService.AddRecord(t).subscribe(t=>{"error"===t.status?this.coreActions.Notify({title:t.message,text:"",css:"bg-error"}):(this.coreActions.Notify({title:"Record "+e+" Successfully",text:"",css:"bg-success"}),this.actions.reloadList(),this.router.navigate(this.ReplyID>0?["/wiki/profile/"+this.ReplyID]:["/wiki/profile/"+t.record.id])),this.showLoader=!1},t=>{this.showLoader=!1,this.coreActions.Notify({title:"Error Occured",text:"",css:"bg-danger"})})}}return t.\u0275fac=function(e){return new(e||t)(d.Mb(u),d.Mb(S),d.Mb(b.a),d.Mb(m.a),d.Mb(f.a),d.Mb(n.a),d.Mb(T),d.Mb(v.a),d.Mb(n.c))},t.\u0275cmp=d.Gb({type:t,selectors:[["ng-component"]],decls:2,vars:2,consts:[[4,"ngIf"],[1,"m-b-40","m-t-40","text-center"],[1,"row","justify-content-md-center"],[1,"col-md-8"],[1,"card"],[1,"card-header"],[1,"m-b-0"],[1,"card-body"],[3,"controls","showLoader","showCancel","showModal","submitText","OnSubmit",4,"ngIf"],[3,"controls","showLoader","showCancel","showModal","submitText","OnSubmit"]],template:function(t,e){1&t&&(d.Ec(0,E,3,0,"div",0),d.Ec(1,J,10,3,"div",0)),2&t&&(d.nc("ngIf",!e.isAccessGranted),d.zb(1),d.nc("ngIf",e.isAccessGranted))},directives:[o.n,A.a,$.a],encapsulation:2,data:{animation:[l.a]}}),Object(r.a)([Object(a.e)(["users","auth"])],t.prototype,"auth$",void 0),t})(),K=(()=>{class t{}return t.\u0275mod=d.Kb({type:t}),t.\u0275inj=d.Jb({factory:function(e){return new(e||t)},providers:[u,S,T,f.a],imports:[[o.c,P.a,n.f,c.i]]}),t})();function U(t,e){if(1&t&&(d.Sb(0,"h2"),d.Gc(1),d.Rb()),2&t){const t=d.gc().$implicit;d.zb(1),d.Hc(t.term_complete)}}const B=function(t){return[t]};function q(t,e){if(1&t&&(d.Sb(0,"span"),d.Sb(1,"a",8),d.Gc(2),d.Rb(),d.Gc(3,", "),d.Rb()),2&t){const t=e.$implicit;d.zb(1),d.nc("routerLink",d.rc(2,B,"/wiki/tag/"+t.slug)),d.zb(1),d.Hc(t.title)}}function Y(t,e){if(1&t&&(d.Sb(0,"p"),d.Gc(1," Tags: "),d.Ec(2,q,4,4,"span",7),d.Rb()),2&t){const t=d.gc().$implicit;d.zb(2),d.nc("ngForOf",t.tags_arr)}}function Q(t,e){if(1&t&&(d.Sb(0,"div",4),d.Sb(1,"div",5),d.Ec(2,U,2,1,"h2",0),d.Nb(3,"div",6),d.Nb(4,"hr"),d.Sb(5,"p"),d.Gc(6),d.hc(7,"date"),d.hc(8,"date"),d.Rb(),d.Ec(9,Y,3,1,"p",0),d.Nb(10,"hr"),d.Rb(),d.Rb()),2&t){const t=e.$implicit,i=e.index;d.zb(2),d.nc("ngIf",0===i),d.zb(1),d.nc("innerHTML",t.description,d.yc),d.zb(3),d.Kc(" Recommended: ",t.recommended,", posted: ",d.jc(7,6,t.created_at,"fullDate"),", updated: ",d.jc(8,9,t.updated_at,"fullDate")," "),d.zb(3),d.nc("ngIf",t.tags_arr.length>0&&0===t.replyid)}}function X(t,e){if(1&t&&(d.Sb(0,"div"),d.Ec(1,Q,11,12,"div",3),d.Rb()),2&t){const t=d.gc();d.zb(1),d.nc("ngForOf",t.Info)}}let Z=(()=>{class t{constructor(){this.Info={},this.Author_FullName=""}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275cmp=d.Gb({type:t,selectors:[["app-wiki-info"]],inputs:{Info:"Info",Author_FullName:"Author_FullName"},decls:4,vars:4,consts:[[4,"ngIf"],[1,"m-b-10","m-t-10"],[1,"btn","btn-primary",3,"routerLink"],["class","card",4,"ngFor","ngForOf"],[1,"card"],[1,"card-body"],[3,"innerHTML"],[4,"ngFor","ngForOf"],[3,"routerLink"]],template:function(t,e){1&t&&(d.Ec(0,X,2,1,"div",0),d.Sb(1,"div",1),d.Sb(2,"a",2),d.Gc(3,"Post Suggestion"),d.Rb(),d.Rb()),2&t&&(d.nc("ngIf",e.Info.length>0),d.zb(2),d.nc("routerLink",d.rc(2,B,"/wiki/process/0/"+e.Info[0].id)))},directives:[o.n,n.e,o.m],pipes:[o.e],encapsulation:2}),t})();function tt(t,e){1&t&&d.Nb(0,"app-loader")}function et(t,e){if(1&t){const t=d.Tb();d.Sb(0,"div"),d.Sb(1,"div",5),d.Sb(2,"app-toolbar-v2",6),d.ec("Action",(function(e){return d.xc(t),d.gc().toolbaraction(e)})),d.Rb(),d.Sb(3,"div",7),d.Nb(4,"app-wiki-info",8),d.Rb(),d.Rb(),d.Rb()}if(2&t){const t=d.gc();d.zb(2),d.nc("Options",t.ToolbarOptions)("isItemsSelected",t.isItemsSelected),d.zb(2),d.nc("Author_FullName",t.Author_FullName)("Info",t.Info)}}let it=(()=>{class t{constructor(t,e,i,s,o,c,n,r,a){this.settingService=t,this.dataService=e,this.coreService=i,this.coreActions=s,this.actions=o,this.route=c,this.formService=n,this.permission=r,this.router=a,this.isItemsSelected=!0,this.RecordID=0,this.FilterOptions={},this.controls=[],this.showLoader=!1,this.formHeading="Wiki Detail",this.submitText="Submit",this.Info={},this.uploadedFiles=[],this.SelectedItems=[],this.Author_FullName="",this.isAccessGranted=!1,this.isActionGranded=!1}ngOnInit(){this.auth$.subscribe(t=>{this.permission.GrandResourceAccess(!1,"1521396235692","1521396214790",t.Role)&&(this.isAccessGranted=!0,this.permission.GrandResourceAction("1521396235692",t.Role)&&(this.isActionGranded=!0))}),this.ToolbarOptions=this.settingService.getToolbarOptions(),this.ToolbarOptions.showtoolbar=!1,this.ToolbarOptions.showcheckAll=!1,this.ToolbarOptions.showsecondarytoolbar=!0,this.ToolbarOptions.ProfileView=!0,this.route.params.subscribe(t=>{this.RecordID=Number.parseInt(t.id,10),isNaN(this.RecordID)&&(this.RecordID=0),this.RecordID>0&&this.LoadInfo()})}LoadInfo(){this.showLoader=!0,this.dataService.GetDetailInfo(this.RecordID).subscribe(t=>{if("error"===t.status)this.coreActions.Notify({title:t.message,text:"",css:"bg-success"}),this.router.navigate(["/wiki"]);else{this.Info=t.post,this.SelectedItems=[];for(const t of this.Info)null!==t.updated_at&&(t.updated_at=new Date(parseInt(t.updated_at.substr(6),10))),t.tags_arr=null!==t.tags&&""!==t.tags?this.ProcessCategories(t.tags.split(",")):[],this.SelectedItems.push(t)}this.showLoader=!1})}ProcessCategories(t){const e=[];for(const i of t)e.push({title:i.trim(),slug:i.trim().replace(/\s+/g,"-").toLowerCase()});return e}toolbaraction(t){switch(t.action){case"m_markas":this.ProcessActions(t.value)}}ProcessActions(t){if(this.isActionGranded){if(this.SelectedItems.length>0){for(const e of this.SelectedItems)e.actionstatus=t.actionstatus;this.dataService.ProcessActions(this.SelectedItems,t),"delete"===t.actionstatus&&this.router.navigate(["/wiki/"])}}else this.coreActions.Notify({title:"Permission Denied",text:"",css:"bg-danger"})}}return t.\u0275fac=function(e){return new(e||t)(d.Mb(u),d.Mb(S),d.Mb(b.a),d.Mb(m.a),d.Mb(f.a),d.Mb(n.a),d.Mb(T),d.Mb(v.a),d.Mb(n.c))},t.\u0275cmp=d.Gb({type:t,selectors:[["ng-component"]],hostVars:1,hostBindings:function(t,e){2&t&&d.Lc("@fadeInAnimation",void 0)},decls:6,vars:2,consts:[[1,"row"],[1,"col-lg-12"],[1,"row","justify-content-md-center"],[1,"col-md-8","col-sm-12","col-xs-12"],[4,"ngIf"],[1,"card"],[3,"Options","isItemsSelected","Action"],[1,"card-body"],[3,"Author_FullName","Info"]],template:function(t,e){1&t&&(d.Sb(0,"div",0),d.Sb(1,"div",1),d.Sb(2,"div",2),d.Sb(3,"div",3),d.Ec(4,tt,1,0,"app-loader",4),d.Ec(5,et,5,4,"div",4),d.Rb(),d.Rb(),d.Rb(),d.Rb()),2&t&&(d.zb(4),d.nc("ngIf",e.showLoader),d.zb(1),d.nc("ngIf",!e.showLoader))},directives:[o.n,A.a,I.a,Z],encapsulation:2,data:{animation:[l.a]}}),Object(r.a)([Object(a.e)(["users","auth"])],t.prototype,"auth$",void 0),t})();i.d(e,"WikiModule",(function(){return ot}));const st=[{path:"",data:{title:"Wiki Management",urls:[{title:"Dashboard",url:"/"},{title:"Wiki",url:"/wiki"},{title:"Management"}]},component:j},{path:"tag/:tagname",data:{title:"Wiki Management",urls:[{title:"Dashboard",url:"/"},{title:"Wiki",url:"/wiki"},{title:"Management"}]},component:j},{path:"profile/:id",data:{title:"Wiki Information",urls:[{title:"Dashboard",url:"/"},{title:"Wiki",url:"/wiki"},{title:"Wiki Information"}]},component:it},{path:"process/:id",data:{title:"Process Wiki",urls:[{title:"Dashboard",url:"/"},{title:"Wiki",url:"/wiki"},{title:"Process"}]},component:V},{path:"process/:id/:replyid",data:{title:"Process Wiki",urls:[{title:"Dashboard",url:"/"},{title:"Wiki",url:"/wiki"},{title:"Process"}]},component:V}];let ot=(()=>{class t{}return t.\u0275mod=d.Kb({type:t}),t.\u0275inj=d.Jb({factory:function(e){return new(e||t)},providers:[u,S,f.a],imports:[[o.c,c.i,P.a,K,C,s.c,n.f.forChild(st)]]}),t})()}}]);